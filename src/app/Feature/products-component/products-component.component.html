<div class="container container-narrow products-section py-5" dir="rtl">
    <div class="text-center mb-5 fade-in-up">
        <h2 class="section-title">{{ title }}</h2>
        <p class="lead-muted mb-4 text-white-50">
            {{ subtitle }}
        </p>
    </div>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 g-4 justify-content-center">
        <div class="col" *ngFor="let p of products">
            <div class="card-zy product-card h-100 d-flex flex-column" data-bs-toggle="modal"
                data-bs-target="#productDetailsModal" (click)="openDetails(p)">
                <div class="product-image-wrapper position-relative">
                    <img [src]="p.img" class="img-cover" [alt]="p.name" loading="lazy" />
                    <div class="overlay">
                        <span class="btn btn-sm btn-light rounded-pill px-3 fw-bold">عرض التفاصيل</span>
                    </div>
                </div>

                <div class="product-body d-flex flex-column flex-grow-1 p-3 text-center">
                    <h5 class="fw-bold mt-2 mb-2 product-title text-white">
                        {{ p.name }}
                    </h5>
                    <p class="product-desc flex-grow-1 text-white-50 small">
                        {{ p.desc }}
                    </p>
                    <button class="btn btn-outline-success w-100 mt-2 rounded-pill btn-sm">
                        التفاصيل
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Details Modal -->
<div class="modal fade" id="productDetailsModal" tabindex="-1" aria-labelledby="productDetailsModalLabel"
    aria-hidden="true" dir="rtl">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content bg-dark text-white border-secondary">
            <div class="modal-header border-secondary d-flex justify-content-between align-items-center w-100 flex-row">
                <h5 class="modal-title fw-bold m-0" id="productDetailsModalLabel">{{ selectedProduct?.name }}</h5>
                <button type="button" class="btn-close btn-close-white m-0" data-bs-dismiss="modal" aria-label="Close"
                    style="margin-right: auto !important; margin-left: 0 !important;"></button>
            </div>
            <div class="modal-body">
                <div class="row g-4 align-items-center">
                    <div class="col-md-6">
                        <div class="modal-img-wrapper rounded-3 overflow-hidden border border-secondary">
                            <img [src]="selectedProduct?.img" [alt]="selectedProduct?.name"
                                class="img-fluid w-100 object-fit-cover" style="max-height: 400px;">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h4 class="text-success mb-3 fw-bold">{{ selectedProduct?.name }}</h4>
                        <p class="lead-muted text-white-50 mb-4">{{ selectedProduct?.desc }}</p>

                        <div class="d-grid gap-2">
                            <a href="https://wa.me/+201066670226" target="_blank"
                                class="btn btn-success rounded-pill fw-bold">
                                <i class="bi bi-whatsapp me-2"></i> اطلب عبر واتساب
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>